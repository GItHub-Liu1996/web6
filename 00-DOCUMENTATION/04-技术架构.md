# Go China Advisors - 项目架构总纲

> **⚠️ 重要提示**: 在阅读此架构文档之前，请务必先查阅 [开发总纲 - 核心开发细则](./00-DOCUMENTATION/03-开发总纲-核心开发细则.md)。该文档包含了项目开发的最高准则和强制执行规则，所有开发工作都必须严格遵循。

## 项目概述

### 项目目标
为外国用户在中国注册和运营公司提供一站式专业服务的权威内容与业务平台，通过高质量的博客内容获取有机流量，建立品牌权威性，推动业务获客。

### 核心价值主张
- **专业性**：提供准确、及时的中国公司注册信息
- **便利性**：简化复杂的注册流程
- **可信度**：通过深度内容建立行业权威地位
- **国际化**：面向全球用户的多语言支持

## 技术架构

### 技术栈选择

#### 前端框架：Next.js 14.2.3
**选择理由：**
- **SEO优化**：内置SSR/SSG支持，对博客内容SEO至关重要
- **性能优化**：自动代码分割、图片优化、字体优化
- **开发体验**：热重载、TypeScript支持、API路由
- **部署便利**：Vercel原生支持，但当前阶段本地开发

#### 类型系统：TypeScript
**选择理由：**
- **类型安全**：减少运行时错误，提高代码质量
- **开发效率**：更好的IDE支持和自动补全
- **团队协作**：清晰的接口定义，便于维护

#### 样式方案：Tailwind CSS
**选择理由：**
- **开发效率**：原子化CSS，快速构建UI
- **一致性**：设计系统内置，确保视觉统一
- **性能优化**：按需生成CSS，减少包体积
- **响应式**：移动优先的设计理念

### 项目结构

```
web6/
├── src/
│   ├── app/                    # Next.js 14.2.3 App Router
│   │   ├── (main)/            # 主要路由组
│   │   │   ├── solutions/     # 解决方案页面
│   │   │   │   ├── startup/   # 企业落地启动方案
│   │   │   │   └── operation/ # 企业持续运营支持
│   │   │   ├── services/      # 服务详情页面
│   │   │   │   ├── [service]/ # 动态服务路由
│   │   │   │   └── page.tsx   # 服务列表页
│   │   │   ├── case-studies/  # 案例研究页面
│   │   │   │   ├── [slug]/    # 动态案例路由
│   │   │   │   └── page.tsx   # 案例列表页
│   │   │   ├── industries/    # 行业方案页面 (v4.2新增)
│   │   │   │   ├── technology/ # 科技与软件行业
│   │   │   │   ├── e-commerce/ # 电子商务与零售
│   │   │   │   ├── professional-services/ # 专业服务业
│   │   │   │   ├── advanced-manufacturing/ # 高端制造业
│   │   │   │   ├── medical-devices/ # 医疗器械
│   │   │   │   └── page.tsx   # 行业概览页
│   │   │   ├── blog/          # 博客/资源中心
│   │   │   │   ├── [slug]/    # 动态博客路由
│   │   │   │   ├── category/  # 博客分类
│   │   │   │   └── page.tsx   # 博客列表页
│   │   │   ├── about/         # 关于我们
│   │   │   ├── contact/       # 联系我们
│   │   │   └── pricing/       # 服务定价（规划中）
│   │   ├── api/               # API路由
│   │   ├── globals.css        # 全局样式
│   │   ├── layout.tsx         # 根布局
│   │   └── page.tsx           # 首页
│   ├── components/            # 可复用组件
│   │   ├── ui/                # 基础UI组件
│   │   ├── layout/            # 布局组件
│   │   │   ├── Header.tsx    # 头部导航
│   │   │   ├── Footer.tsx    # 页脚
│   │   │   ├── Navigation.tsx # 主导航 (v4.2更新)
│   │   │   └── MegaMenu.tsx   # 超级菜单 (v4.2新增)
│   │   ├── solutions/         # 解决方案组件
│   │   ├── case-studies/      # 案例研究组件
│   │   ├── forms/             # 表单组件
│   │   └── blog/              # 博客组件（规划中）
│   ├── lib/                   # 工具函数和配置
│   │   ├── utils.ts           # 通用工具函数
│   │   ├── validations.ts     # 表单验证
│   │   └── constants.ts       # 常量定义
│   └── types/                 # TypeScript类型定义
├── content/                   # 内容管理（与src分离）
│   ├── blog/                 # 博客文章
│   ├── case-studies/         # 成功案例
│   └── translations/         # 多语言翻译文件
├── public/                   # 静态资源
├── 00-DOCUMENTATION/         # 项目文档
└── tests/                    # 测试文件
```

## 架构决策记录 (ADR)

### ADR-001: 选择Next.js App Router
**日期：** 2024-01-XX
**状态：** 已接受

**背景：**
需要构建一个以博客为核心的营销网站，SEO和性能是关键要求。

**决策：**
使用Next.js 14.2.3的App Router架构。

**理由：**
1. **SEO优势**：内置SSR/SSG支持，对博客内容SEO至关重要
2. **性能优化**：自动代码分割、图片优化
3. **开发体验**：更好的文件系统路由和布局系统
4. **未来兼容**：App Router是Next.js的未来方向
5. **稳定性**：经过社区广泛验证的稳定版本，与Storybook完美兼容

**后果：**
- 需要学习新的路由系统
- 某些第三方库可能需要适配
- 但长期来看，性能和开发体验都会更好

### ADR-002: 内容管理策略 (v2.0 深化版)
**日期：** 2025-01-21
**状态：** 已接受

**背景：**
随着项目的发展，需要建立更加完善和可扩展的内容管理策略。原有的简单MDX方案需要深化，以支持更丰富的内容类型、更好的开发体验和更安全的内容创作流程。

**决策：**
项目将采用代码与内容分离的核心策略。所有长篇内容（博客、案例）将使用 MDX 格式，并统一存放在项目根目录的 /content 文件夹下，通过 Git 进行版本控制。

**1. 内容格式：MDX (Markdown + JSX)**

**优势**: 允许内容创作者在简单的 Markdown 语法基础上，嵌入交互式的、预先设计好的 React 组件（如 Alert, Chart），极大地丰富了内容的表现力。

**Frontmatter**: 每一篇 .mdx 文件都必须在文件顶部包含一个 --- 包裹的 YAML frontmatter 区域，用于定义文章的元数据。

**Frontmatter 必选字段**:
- `title` (string): 文章标题
- `date` (string): 发布日期 (格式: YYYY-MM-DD)
- `author` (string): 作者名
- `excerpt` (string): 文章摘要，用于在列表页显示
- `tags` (string[]): 标签数组，用于分类和推荐

**Frontmatter 可选字段**:
- `slug` (string): 自定义URL slug，默认为文件名
- `category` (string): 文章分类
- `featured` (boolean): 是否为推荐文章
- `draft` (boolean): 是否为草稿状态
- `language` (string): 内容语言 (zh, en, etc.)
- `readingTime` (number): 预计阅读时间（分钟）
- `coverImage` (string): 封面图片URL
- `seoTitle` (string): SEO优化标题
- `seoDescription` (string): SEO优化描述

**2. 技术实现与数据流**

**内容解析**: 我们将在 `src/lib/content-parser.ts` 中，创建一个专用的函数来处理内容读取。

**核心依赖**:
- `gray-matter`: 用于解析 .mdx 文件中的 frontmatter 元数据
- `next-mdx-remote`: 用于将 .mdx 文件的内容安全地渲染为 HTML 和 React 组件
- `remark` 和 `rehype`: 用于 Markdown 内容的预处理和后处理

**数据流**: 当用户访问一篇博客时，Next.js 的服务器组件将：
1. 根据 URL (slug)，在 /content/blog 目录中找到对应的 .mdx 文件
2. 使用 gray-matter 读取其 frontmatter
3. 使用 next-mdx-remote 解析其正文内容
4. 将解析出的元数据和内容，传递给页面模板组件进行最终渲染

**3. 内容创作与修改工作流**

**安全隔离**: 内容创作者的所有工作都仅限于在 /content 目录下创建和修改 .mdx 文件。他们绝对不需要触碰 /src 目录下的任何代码。

**崩溃预防**: 即使 .mdx 文件本身存在语法错误（例如，忘记闭合一个组件标签），Next.js 的构建过程也会在开发阶段就明确地报错，指出错误的文件和行号，而不会导致线上网站崩溃。这从根本上解决了内容创作过程中的稳定性问题。

**内容验证**: 在构建过程中，系统会自动验证：
- Frontmatter 字段的完整性和格式正确性
- MDX 语法的有效性
- 引用的组件是否存在
- 图片和链接的有效性

**4. 文件组织结构**

```
/content/
├── blog/                    # 博客文章
│   ├── 2024/
│   │   ├── 01/
│   │   │   ├── china-foreign-investment-guide-2024.mdx
│   │   │   └── tax-compliance-best-practices.mdx
│   │   └── 02/
│   │       └── ...
│   └── 2025/
│       └── ...
├── case-studies/            # 案例研究
│   ├── tech-startup-success.mdx
│   ├── manufacturing-expansion.mdx
│   └── ...
├── pages/                   # 静态页面内容
│   ├── about-us.mdx
│   ├── privacy-policy.mdx
│   └── ...
└── translations/            # 多语言翻译
    ├── zh/
    │   ├── common.json
    │   └── navigation.json
    └── en/
        ├── common.json
        └── navigation.json
```

**5. 组件集成策略**

**预定义组件**: 在 `src/components/content/` 目录下，提供一系列预定义的组件供内容创作者使用：
- `Alert`: 提示框组件
- `Callout`: 重要信息突出显示
- `CodeBlock`: 代码块高亮
- `Image`: 优化的图片组件
- `Video`: 视频嵌入组件
- `Table`: 表格组件
- `Quote`: 引用块组件

**组件使用示例**:
```mdx
---
title: "中国外商投资指南"
date: "2024-01-15"
author: "Go China Advisors Team"
excerpt: "2024年外国企业在中国设立公司的详细指南"
tags: ["外商投资", "公司注册", "中国市场"]
---

# 中国外商投资指南

<Alert type="info">
这是一个重要的政策更新，请仔细阅读。
</Alert>

## 关键步骤

1. **市场调研与可行性分析**
2. **公司类型选择**

<Callout type="warning">
请注意最新的政策变化。
</Callout>
```

**6. 性能优化策略**

**静态生成**: 所有内容页面在构建时预生成，确保最佳性能
**增量静态再生**: 支持内容的增量更新，无需全站重新构建
**图片优化**: 自动处理内容中的图片，生成多种尺寸和格式
**代码分割**: 按需加载内容相关的组件和依赖

**7. 未来演进路径**

**阶段一 (当前): Git-based MDX 工作流**
- 开发者友好的内容创作环境
- 完整的版本控制和协作支持
- 构建时验证和错误处理

**阶段二 (团队协作期): 引入 Git-based Headless CMS**
- 可视化编辑界面（如 Decap CMS）
- 非技术人员的友好操作体验
- 保留所有技术优势

**阶段三 (规模化期): 迁移到 API-driven Headless CMS**
- 企业级内容管理功能
- 高级工作流和审批流程
- 多语言内容管理优化

**理由：**
1. **开发体验**: 在代码编辑器中直接编写，支持组件混排
2. **性能优先**: 静态生成确保最佳的用户体验和 SEO 表现
3. **安全隔离**: 内容创作与代码开发完全分离
4. **错误处理**: 构建时验证，避免运行时错误
5. **扩展性**: 支持丰富的组件和交互功能
6. **未来兼容**: 架构设计考虑了长期演进

**后果：**
- 需要建立完善的内容解析和验证系统
- 需要为内容创作者提供组件使用文档
- 但随着业务增长，可以平滑过渡到更高级的 CMS 系统

### ADR-002: 技术栈稳定性优化

**日期：** 2025-09-20
**状态：** 已接受
**决策者：** 项目架构师

**背景：**
在项目初期，我们选择了最新的技术版本（Next.js 15, React 19, TypeScript 5.9, Tailwind CSS 4），但在实际开发过程中遇到了严重的兼容性问题，特别是Storybook与Next.js 15的Webpack冲突，导致开发环境无法正常运行。

**决策：**
降级到"主流稳定技术栈"，确保所有工具链和谐共存。

**具体版本调整：**
- **Next.js**: 15.5.3 → 14.2.3
- **React**: 19.1.0 → 18.3.1  
- **TypeScript**: 5.9.2 → 5.4.5
- **Tailwind CSS**: 4.0 → 3.4.3
- **Storybook**: 9.1.7 → 8.6.14 (降级到稳定版本)
- **ESLint**: 9.x → 8.57.0 (兼容版本)

**理由：**
1. **稳定性优先**：选择经过社区广泛验证的稳定版本
2. **兼容性保证**：确保所有工具链之间和谐共存，避免版本冲突
3. **开发效率**：避免因工具链问题导致的开发中断
4. **社区支持**：稳定版本有更好的社区支持和文档
5. **生产就绪**：稳定版本更适合生产环境部署

**影响：**
- ✅ Storybook可以正常运行，支持组件开发
- ✅ 所有依赖包兼容性良好
- ✅ 开发环境稳定可靠
- ✅ 为后续开发奠定坚实基础

### ADR-003: 多语言支持策略
**日期：** 2024-01-XX
**状态：** 已接受

**背景：**
目标用户是外国用户，需要多语言支持。网站需要支持中文（主要）和英文，未来可能扩展到其他语言。需要与内容管理策略紧密配合，确保多语言内容的统一管理。

**决策：**
采用 next-intl 作为国际化框架，实现全站多语言支持。

**具体实施方案:**

**1. 路由策略**
- 采用子路径路由 (`/en`, `/zh`, etc.) 来区分语言版本，这对 SEO 最友好
- 默认语言：中文（zh）作为默认语言，根路径 `/` 指向中文版本
- 语言切换：通过 URL 参数或语言选择器实现

**2. UI 文本翻译**
- 网站界面、导航、表单等固定文本，使用 next-intl 的标准 JSON 文件进行管理
- 存放于 `/content/translations` 目录下，按语言分文件夹组织
- 支持嵌套的翻译键，便于组织复杂的翻译内容

**3. 内容翻译 (博客/页面)**
- 长篇内容（如博客文章）通过文件命名约定进行版本控制
- 示例：
  - 英文版: `some-post.en.mdx`
  - 中文版: `some-post.zh.mdx`
- 代码逻辑将根据当前路由的语言标识，自动读取对应语言版本的文件
- 支持内容级别的多语言管理，与 UI 翻译分离

**4. 技术实现细节**
- 使用 next-intl 的 App Router 集成
- 支持 TypeScript 类型安全，编译时检查翻译键
- 按需加载翻译文件，减少初始包体积
- 支持多语言 SEO，每个语言版本有独立的 URL
- 与内容管理策略无缝集成

**5. 未来演进**
- 我们选定的内容管理演进路径（无论是 Decap CMS 还是 Sanity.io）都对多语言内容管理提供了成熟的支持
- 确保了此策略的长期可行性和扩展性

**理由：**
1. **Next.js集成**：与Next.js App Router完美集成
2. **类型安全**：TypeScript支持，编译时检查翻译键
3. **性能优化**：按需加载翻译文件，减少初始包体积
4. **SEO友好**：支持多语言SEO，每个语言版本有独立的URL
5. **内容管理**：通过文件命名约定，便于内容团队管理多语言内容
6. **开发体验**：提供良好的开发工具和调试支持
7. **未来兼容**：与内容管理演进路径完美配合

**后果：**
- 需要维护多套翻译文件
- 内容团队需要学习文件命名约定
- 增加开发和维护成本
- 但能提供更好的用户体验和SEO效果
- 为未来的内容管理升级做好准备

### ADR-004: 营销技术栈与 Zoho 生态集成
**日期：** 2024-01-XX
**状态：** 已接受

**背景：**
项目需要实现从流量到客户的高效转化，并进行精细化运营。需要一个完整的营销技术栈来支持客户关系管理、邮件营销和用户行为分析。

**决策：**
深度集成 Zoho 生态系统，包括 Zoho CRM、Zoho Campaigns 和 Zoho PageSense。

**理由：**
1. **一站式解决方案**：Zoho 提供完整的营销技术栈，减少集成复杂度
2. **成本效益**：相比多个独立工具，Zoho 生态提供更好的价格优势
3. **数据统一**：所有营销数据在同一个生态系统中，便于分析和决策
4. **技术成熟**：Zoho 提供完善的 API 和开发者工具
5. **扩展性**：随着业务增长，可以轻松扩展到其他 Zoho 产品

**技术实现：**
- **CRM 集成**：通过 `/api/contact` 路由自动创建潜在客户
- **邮件营销**：通过 `/api/subscribe` 路由管理邮件列表
- **行为分析**：集成 PageSense 跟踪代码，提供热力图和会话录屏
- **安全考虑**：所有 API 密钥存储在环境变量中，使用 HTTPS 通信

**后果：**
- 需要学习 Zoho API 的使用方法
- 增加系统复杂度和维护成本
- 但能提供完整的营销自动化能力
- 为业务增长提供强有力的技术支撑

### ADR-005: v4.2 超级菜单导航架构
**日期：** 2024-01-XX
**状态：** 已接受

**背景：**
随着业务发展，需要更复杂的导航结构来展示解决方案和行业方案。传统的下拉菜单无法有效展示多层级的内容结构，需要设计一个更强大的导航系统。

**决策：**
实现三栏布局的超级菜单（Mega Menu）架构，专门用于"解决方案"导航项。

**具体实施方案:**

**1. 超级菜单设计**
- **第一栏**：按业务阶段划分
  - 企业落地启动方案 → `/solutions/startup`
  - 企业持续运营支持 → `/solutions/operation`
  - 全部服务概览 → `/services`

- **第二栏**：按行业领域划分
  - 科技与软件 (TMT) → `/industries/technology`
  - 电子商务与零售 → `/industries/e-commerce`
  - 专业服务业 → `/industries/professional-services`
  - 高端制造业 → `/industries/advanced-manufacturing`
  - 医疗器械 → `/industries/medical-devices`
  - 查看所有行业方案 → `/industries`

- **第三栏**：特色内容
  - 🚀 科技创业成功案例 → `/case-studies/tech-startup-success`
  - 💬 获取免费咨询 → `/contact`

**2. 响应式设计**
- **桌面端**：鼠标悬停展开三栏布局
- **移动端**：点击展开折叠式列表
- **交互优化**：平滑的展开/收起动画

**3. 技术实现**
- **MegaMenu.tsx**：独立的超级菜单组件
- **Navigation.tsx**：集成超级菜单的导航组件
- **状态管理**：使用React useState管理菜单展开状态
- **样式系统**：基于Tailwind CSS的响应式设计

**4. 页面结构扩展**
- 新增 `/industries/` 路由组
- 创建5个行业专业页面
- 创建科技创业成功案例页面
- 所有页面采用占位符结构，便于后续开发

**理由：**
1. **用户体验**：提供更直观的导航体验，减少点击层级
2. **内容组织**：清晰的三栏布局，便于用户快速找到相关内容
3. **业务逻辑**：符合解决方案驱动的设计哲学
4. **扩展性**：为未来的内容扩展提供良好的架构基础
5. **移动端友好**：响应式设计确保移动端体验

**后果：**
- 增加了导航组件的复杂度
- 需要维护更多的页面和路由
- 但提供了更好的用户体验和业务转化能力
- 为未来的内容扩展奠定了坚实基础

### ADR-006: 多渠道客户咨询策略
**日期：** 2025-01-21
**状态：** 已接受
**决策者：** 项目架构师

**背景：**
随着业务发展，需要建立多渠道的客户咨询体系，以最大化客户触达和转化效率。传统的单一联系表单已无法满足不同客户群体的沟通偏好和即时性需求。

**决策：**
采用"四位一体"的多渠道客户咨询策略，整合深度咨询表单、在线实时聊天、价值驱动的邮件订阅和传统/本地化渠道。

**具体实施方案:**

**1. 深度咨询表单 (ContactForm)**
- **定位**: 作为主要的深度咨询工具，收集详细的客户需求和背景信息
- **技术实现**: 与 Zoho CRM 强绑定，自动创建潜在客户记录
- **功能特性**:
  - 多步骤表单设计，降低填写门槛
  - 智能字段显示，根据用户选择动态调整
  - 表单验证和错误处理
  - 提交成功后的自动确认邮件

**2. 在线实时聊天 (Zoho SalesIQ)**
- **定位**: 提供即时咨询和访客支持
- **技术实现**: 在根布局文件中集成 Zoho SalesIQ 聊天小部件
- **功能特性**:
  - 非侵入式悬浮聊天图标
  - 多语言聊天界面支持
  - 智能访客识别和追踪
  - 聊天记录自动保存到 CRM
  - 离线消息和自动回复

**3. 价值驱动的邮件订阅**
- **定位**: 通过高质量内容建立长期客户关系
- **技术实现**: 与 Zoho Campaigns 集成，自动化邮件营销
- **功能特性**:
  - 分段订阅（按行业、服务类型）
  - 个性化内容推荐
  - 自动化邮件序列
  - 订阅者行为追踪

**4. 传统/本地化渠道 (微信)**
- **定位**: 针对中国市场的本地化沟通渠道
- **技术实现**: 在页脚和联系页面展示微信公众号二维码
- **功能特性**:
  - 微信公众号二维码展示
  - 微信客服功能说明
  - 本地化联系信息

**理由：**
1. **客户覆盖**: 满足不同客户群体的沟通偏好
2. **转化效率**: 多渠道并行，最大化转化机会
3. **用户体验**: 提供即时响应和深度咨询的双重选择
4. **数据整合**: 所有渠道数据统一汇聚到 CRM
5. **本地化**: 适应中国市场的沟通习惯

**后果：**
- 需要维护多个技术集成点
- 增加了客户服务的工作量
- 但显著提升了客户触达和转化效率
- 为业务增长提供了强有力的技术支撑

### ADR-007: 新增企业重组与平稳退出服务线
**日期：** 2025-01-21
**状态：** 已接受
**决策者：** 项目架构师

**背景：**
随着中国外商投资环境的复杂化和企业生命周期管理的需求增长，客户需要从企业设立到退出的"全生命周期"服务支持。当前网站主要关注企业进入和持续运营，缺乏退出阶段的专业服务支持。

**决策：**
新增"企业重组与平稳退出策略"服务线，作为"企业持续运营支持"的重要组成部分，提供从股权转让到完全退出的完整解决方案。

**具体实施方案:**

**1. 服务线架构设计**
- **核心落地页**: `/services/corporate-restructuring-and-exit`
- **服务分类**: 企业持续运营支持 → 重组与退出策略
- **目标客户**: 需要退出中国市场的跨国公司、合资企业、外商独资企业

**2. 六个具体服务产品**
1. **股权转让 (Equity Transfer)** → `/services/equity-transfer`
2. **资产出售 (Asset Sale)** → `/services/asset-sale`
3. **清算与注销 (Liquidation & Deregistration)** → `/services/liquidation-deregistration`
4. **资金清算与汇出 (Funds Liquidation & Repatriation)** → `/services/funds-liquidation-repatriation`
5. **员工遣散与补偿 (Employee Severance & Compensation)** → `/services/employee-severance-compensation`
6. **替代性方案咨询 (Alternative Strategy Consulting)** → `/services/alternative-strategy-consulting`

**3. 网站架构整合策略**
- **导航更新**: 在"解决方案"超级菜单中新增"重组与退出"选项
- **内容关联**: 与现有服务页面建立内部链接关系
- **SEO优化**: 针对"企业退出"、"股权转让"等关键词进行优化
- **转化路径**: 从问题识别到解决方案的完整用户旅程

**4. 技术实现要求**
- **页面结构**: 创建7个新页面（1个总览页 + 6个服务详情页）
- **组件开发**: 开发5个专用组件（服务卡片、时间线、检查清单、计算器、风险评估）
- **内容管理**: 建立完整的内容策略和SEO优化方案
- **集成策略**: 与现有ContactForm和CRM系统无缝集成

**理由：**
1. **市场完整性**: 提供企业全生命周期服务，增强竞争优势
2. **客户价值**: 满足客户从进入到退出的完整需求
3. **业务增长**: 开拓新的收入来源和客户群体
4. **专业权威**: 建立行业专业形象和品牌权威性
5. **技术一致性**: 遵循现有架构模式，确保系统稳定性

**后果：**
- 需要创建6个新的服务详情页面和1个总览页面
- 需要开发5个新的专用组件
- 需要更新导航结构和内容策略
- 需要维护更多的页面和组件
- 但将显著提升服务完整性和市场竞争力
- 为业务增长提供新的收入来源

## 第五章 组件库与设计系统

为确保项目UI的质量、一致性和可维护性，我们采用基于 Shadcn/ui 和 Storybook 的现代化组件库与设计系统。

### 5.1 核心技术选型：Shadcn/ui
- **性质**: 本项目不使用传统的NPM包组件库。我们采用 Shadcn/ui，通过命令行按需将高质量、经过社区验证的组件源代码直接添加到我们的项目中 (`src/components/ui`)。
- **选择理由**:
    - **完全所有权**: 组件代码成为我们自己项目的一部分，我们可以100%自定义其样式和逻辑。
    - **极致轻量**: 项目最终打包体积中不包含任何未使用的组件代码。
    - **技术栈统一**: 组件完全基于 Tailwind CSS 构建，与我们的样式方案无缝集成。
    - **最佳实践**: 底层基于 Radix UI 构建，确保了所有组件在无障碍（a11y）和交互健壮性上达到行业最高标准。

### 5.2 组件的"单一事实来源"：Storybook
- **定位**: Storybook 是我们项目中所有"原子"和"分子"组件的**官方零件目录**和**交互式文档**。
- **核心流程**:
    1.  **开发与测试**: 所有 `ui/` 和 `molecules/` 目录下的组件，都必须首先在 Storybook 的隔离环境中进行开发、视觉验收和交互测试。
    2.  **文档化**: 每个组件的故事文件 (`.stories.tsx`) 都是该组件的"活文档"，用于展示其所有变体、尺寸和状态。
    3.  **验收标准**: 一个组件只有在 Storybook 中通过了我们制定的四大维度（视觉、功能、交互、代码）的评审，才能被视为"开发完成"。

## 第六章 营销技术栈与 Zoho 生态集成

为实现从流量到客户的高效转化并进行精细化运营，本项目将深度集成 Zoho 的生态系统。

### 6.1 客户关系管理 (CRM): Zoho CRM
- **集成目标**: 所有通过网站联系表单提交的潜在客户信息，都必须被自动创建为 Zoho CRM 中的"潜在客户 (Lead)"。
- **技术实现**: 通过服务端的 Next.js API 路由 (例如 `/api/contact`)，安全地调用 Zoho CRM API 完成数据写入。

### 6.2 邮件营销: Zoho Campaigns
- **集成目标**: 网站上的"邮件订阅"表单，必须将订阅者的邮箱地址添加到 Zoho Campaigns 的指定邮件列表中。
- **技术实现**: 通过专门的 API 路由 (`/api/subscribe`) 在后端调用 Zoho 的 API 来完成操作。

### 6.3 在线实时聊天与访客追踪: Zoho SalesIQ
- **集成目标**: 在所有页面提供非侵入式的实时聊天功能，实现访客的即时咨询和转化。
- **技术实现**: 在根布局文件 (`src/app/layout.tsx`) 中集成 Zoho SalesIQ 的聊天小部件，支持多语言聊天界面和访客行为追踪。
- **功能特性**:
  - 智能访客识别和追踪
  - 多语言聊天界面支持
  - 自动访客信息收集
  - 与 Zoho CRM 无缝集成
  - 聊天记录自动保存到 CRM

### 6.4 用户行为分析: Zoho PageSense
- **集成目标**: 为了理解用户如何与我们的网站和博客内容互动，优化转化路径，我们将使用 Zoho PageSense。
- **技术实现**: 在根布局文件 (`src/app/layout.tsx`) 中集成其跟踪代码，并利用其热力图、会话录屏和A/B测试功能。

## 第九章 国际化(i18n)实施策略

为支持全球业务，项目将采用"内容分层"、"技术降级"和"流程自动化"的务实策略，支持10种核心目标语言。

### 9.1 目标语言
`en`, `zh`, `es`, `de`, `fr`, `ja`, `pt`, `ru`, `ar`, `ko`。

### 9.2 内容分层翻译策略
- **第一层 (核心路径)**: 首页、解决方案、服务、行业、联系我们等核心转化页面，必须提供高质量人工翻译。
- **第二层 (热门内容)**: Top 5-10 的高流量博客文章，提供人工翻译。
- **第三层 (其他内容)**: 其余博客和案例，默认提供英文版，并实现"内容降级"逻辑。

### 9.3 技术实现
- **UI文本**: 使用 `next-intl` 和按功能模块组织的 JSON 文件 (`/content/translations`) 进行管理。
- **内容文本**: 使用文件命名约定 (`article.en.mdx`) 进行版本控制。
- **内容降级**: 当目标语言版本不存在时，系统必须优雅地展示英文版内容，并给出友好提示。

### 9.4 翻译工作流
- 采用基于 Git 的翻译管理系统 (TMS)，如 **Lokalise** 或 **Crowdin**，连接到项目的 GitHub 仓库，实现翻译流程的自动化。

## 组件库与设计系统

### 设计令牌 (Design Tokens)

**颜色系统：**
- **主色调**：蓝色系 (#3b82f6) - 代表专业和信任
- **辅助色**：灰色系 (#6b7280) - 用于次要信息和背景
- **成功色**：绿色系 (#10b981) - 用于成功状态
- **警告色**：黄色系 (#f59e0b) - 用于警告信息
- **错误色**：红色系 (#ef4444) - 用于错误状态

**字体系统：**
- **主字体**：Geist Sans - 现代、清晰的无衬线字体
- **等宽字体**：Geist Mono - 用于代码和技术内容
- **字体大小**：12px, 14px, 16px, 18px, 20px, 24px, 32px, 48px
- **行高**：1.2 (标题), 1.5 (正文), 1.6 (长文本)

**间距系统：**
- **基础单位**：4px
- **间距等级**：4px, 8px, 12px, 16px, 20px, 24px, 32px, 40px, 48px, 64px
- **容器宽度**：320px (手机), 768px (平板), 1024px (桌面), 1280px (大屏)

**圆角系统：**
- **小圆角**：4px - 用于按钮、输入框
- **中圆角**：8px - 用于卡片、面板
- **大圆角**：12px - 用于模态框、大型组件

### 组件库架构

**基础组件 (UI Components)：**
- **Button**：多种变体和尺寸的按钮组件
- **Input**：表单输入组件，支持验证和错误状态
- **Card**：内容容器组件，支持多种样式变体
- **Modal**：模态框组件，用于弹窗和对话框
- **Toast**：消息提示组件，用于用户反馈

**布局组件 (Layout Components)：**
- **Header**：网站头部导航组件
- **Footer**：网站页脚组件
- **Container**：内容容器组件，响应式布局
- **Grid**：网格布局组件
- **Stack**：垂直/水平堆叠组件

**业务组件 (Business Components)：**
- **BlogCard**：博客文章卡片组件
- **ServiceCard**：服务介绍卡片组件
- **ContactForm**：联系表单组件
- **TestimonialCard**：客户评价卡片组件

### 单一事实来源原则

**Storybook 集成：**
- **组件文档**：所有基础组件必须在 Storybook 中展示
- **交互测试**：组件的各种状态和交互在 Storybook 中测试
- **设计规范**：设计令牌和组件变体在 Storybook 中统一管理
- **开发工具**：提供组件开发、测试和文档的完整工具链

**组件开发流程：**
1. 在 Storybook 中设计和测试组件
2. 编写组件代码和 JSDoc 注释
3. 添加单元测试
4. 更新 Storybook 文档
5. 通过 Pull Request 审查

### 设计系统维护

**版本控制：**
- 设计令牌变更需要更新文档
- 组件破坏性变更需要版本号升级
- 定期审查设计系统的一致性

**团队协作：**
- 设计师负责设计令牌定义
- 开发者负责组件实现
- 产品经理负责业务组件需求

## 依赖库记录

### 核心依赖库

#### next-intl (^3.0.0)
**用途：** 国际化支持
**选择理由：**
- 与Next.js App Router完美集成
- 支持TypeScript类型安全
- 按需加载翻译文件，性能优化
- 支持多语言SEO

#### gray-matter (^4.0.3)
**用途：** Markdown文件解析
**选择理由：**
- 轻量级，性能优秀
- 支持Frontmatter解析
- 与静态站点生成完美配合
- 简单易用的API

#### remark (^15.0.1) + remark-html (^16.0.1)
**用途：** Markdown转HTML
**选择理由：**
- 强大的Markdown处理能力
- 支持插件扩展
- 与Next.js SSG完美集成
- 活跃的社区支持

#### clsx (^2.0.0) + tailwind-merge (^2.0.0)
**用途：** CSS类名管理
**选择理由：**
- clsx：条件类名处理
- tailwind-merge：Tailwind CSS冲突解决
- 类型安全，TypeScript支持
- 性能优化，减少包体积

### 开发依赖库

#### @testing-library/react (^14.0.0) + @testing-library/jest-dom (^6.0.0)
**用途：** React组件测试
**选择理由：**
- 官方推荐的React测试方案
- 专注于用户行为测试
- 与Jest完美集成
- 支持无障碍测试

#### eslint-plugin-jsx-a11y (^6.8.0)
**用途：** 无障碍性检查
**选择理由：**
- 自动检查可访问性问题
- 符合WCAG标准
- 与ESLint集成
- 提高网站可访问性

#### prettier (^3.0.0)
**用途：** 代码格式化
**选择理由：**
- 统一的代码风格
- 与ESLint配合使用
- 支持多种文件格式
- 提高代码可读性

### 营销技术栈依赖库

#### zoho-crm-api (规划中)
**用途：** Zoho CRM API 集成
**选择理由：**
- 官方或社区维护的 Zoho CRM API 客户端
- 支持 TypeScript 类型定义
- 提供完整的 CRM 操作功能
- 支持认证和错误处理

#### zoho-campaigns-api (规划中)
**用途：** Zoho Campaigns API 集成
**选择理由：**
- 邮件营销自动化集成
- 支持订阅管理和列表操作
- 提供营销活动管理功能
- 支持 A/B 测试和性能分析

#### @zoho/pagesense (规划中)
**用途：** Zoho PageSense 用户行为分析
**选择理由：**
- 用户行为跟踪和分析
- 热力图和会话录屏功能
- 转化漏斗分析
- A/B 测试支持

### 版本管理策略

**生产依赖：** 使用精确版本号，确保生产环境稳定性
**开发依赖：** 使用范围版本号，允许安全更新

**更新策略：**
- 定期运行 `npm audit` 检查安全漏洞
- 使用 `npm outdated` 检查可更新依赖
- 重要更新前进行充分测试
- 记录重要依赖的更新原因和影响

## 核心功能模块

### 1. 博客系统
- **文章管理**：MDX格式，支持Frontmatter和React组件混排
- **分类标签**：按主题和地区分类
- **搜索功能**：全文搜索
- **相关推荐**：基于标签和分类的推荐
- **多语言支持**：通过文件命名约定管理多语言内容

### 2. 服务展示
- **服务介绍**：公司注册流程、费用、时间
- **案例展示**：成功案例和客户评价
- **在线咨询**：联系表单和即时聊天
- **服务预约**：在线预约系统

### 3. 用户认证与授权
- **管理员登录**：简单的管理员后台访问控制
- **角色管理**：区分管理员和普通用户权限
- **会话管理**：安全的用户会话处理
- **技术选型**：初步考虑使用 NextAuth.js

### 4. 用户交互
- **联系表单**：多步骤表单，收集用户需求
- **资源下载**：白皮书、指南等营销材料
- **邮件订阅**：Newsletter订阅
- **在线咨询**：实时聊天功能

### 5. 营销技术栈与 Zoho 生态集成
为实现从流量到客户的高效转化，并进行精细化运营，本项目将深度集成 Zoho 的生态系统。

#### 5.1 客户关系管理 (CRM): Zoho CRM

**集成目标：**
所有通过网站联系表单提交的潜在客户信息，都必须被自动创建为 Zoho CRM 中的"潜在客户 (Lead)"或"联系人 (Contact)"。

**技术实现：**
- 前端的联系表单将数据提交到一个服务端的 Next.js API 路由 (例如 `/api/contact`)
- 该 API 路由在后端服务器上，使用官方或社区提供的 Zoho CRM API 客户端，安全地调用接口，将数据写入 Zoho CRM
- 支持数据映射和字段转换，确保网站表单数据正确映射到 CRM 字段

**安全注意：**
- Zoho API 的认证密钥严禁存储在前端代码中
- 必须作为环境变量安全地存放在 Vercel 后端
- 使用 HTTPS 进行所有 API 通信
- 实施适当的错误处理和重试机制

#### 5.2 邮件营销: Zoho Campaigns / Marketing Automation

**集成目标：**
网站上的"邮件订阅 (Newsletter)"表单，必须将订阅者的邮箱地址添加到 Zoho Campaigns (或你使用的其他 Zoho 营销工具) 的指定邮件列表中。

**技术实现：**
- 与 CRM 集成类似，通过一个专门的 API 路由 (`/api/subscribe`) 在后端调用 Zoho 的 API 来完成操作
- 支持订阅确认和退订功能
- 集成邮件模板和自动化流程
- 支持分段营销和个性化内容

**功能特性：**
- 自动邮件序列
- 行为触发邮件
- A/B 测试支持
- 邮件性能分析

#### 5.3 用户行为分析: Zoho PageSense

**集成目标：**
为了理解用户如何与我们的网站和博客内容互动，优化转化路径，我们将使用 Zoho PageSense。

**技术实现：**
- 在 Next.js 的根布局文件 (`src/app/layout.tsx`) 中，集成 Zoho PageSense 的跟踪代码片段
- 配置自定义事件跟踪，监控关键用户行为
- 设置转化漏斗分析，跟踪从访问到咨询的完整路径

**应用功能：**
- **热力图 (Heatmaps)**：分析用户点击和滚动行为，优化页面布局
- **会话录屏 (Session Recordings)**：观察用户真实使用过程，发现 UX 问题
- **转化分析**：跟踪关键转化点，优化转化率
- **A/B 测试**：对关键转化页面（如服务介绍页、联系表单页）进行优化实验
- **用户旅程分析**：理解用户从访问到转化的完整路径

#### 5.4 集成架构设计

**数据流设计：**
```
用户行为 → PageSense 分析 → 数据洞察
用户提交 → API 路由 → Zoho CRM → 销售跟进
邮件订阅 → API 路由 → Zoho Campaigns → 营销自动化
```

**API 路由设计：**
- `/api/contact` - 联系表单提交，创建 CRM 潜在客户
- `/api/subscribe` - 邮件订阅，添加到营销列表
- `/api/analytics` - 自定义事件跟踪
- `/api/webhook` - Zoho 系统回调处理

**环境变量配置：**
```env
# Zoho CRM
ZOHO_CRM_CLIENT_ID=your_client_id
ZOHO_CRM_CLIENT_SECRET=your_client_secret
ZOHO_CRM_REFRESH_TOKEN=your_refresh_token
ZOHO_CRM_ORG_ID=your_org_id

# Zoho Campaigns
ZOHO_CAMPAIGNS_API_KEY=your_api_key
ZOHO_CAMPAIGNS_LIST_ID=your_list_id

# Zoho PageSense
ZOHO_PAGESENSE_TRACKING_ID=your_tracking_id
```

**错误处理和监控：**
- 实施完整的错误处理机制
- 记录所有 API 调用日志
- 设置监控和告警系统
- 实施数据备份和恢复策略

## 第七章：性能优化核心战略 (Performance Strategy)

### 7.1. 性能预算 (Performance Budget)
我们的目标是提供世界级的用户体验，因此我们为所有核心页面设立严格的性能预算：

- **LCP (最大内容绘制)**: < 2.5秒
- **INP (下次绘制的交互)**: < 200毫秒
- **CLS (累计布局偏移)**: < 0.1

### 7.2. 核心技术策略

**静态优先**: 所有内容页面（博客、服务、案例）必须默认采用静态生成(SSG)或增量静态再生(ISR)进行预渲染。

**强制图片优化**: 必须使用 Next.js 的 `<Image>` 组件处理所有图片，禁止使用原生的 `<img>` 标签。

**智能代码分割**: 对于非首屏、或仅在特定交互后才出现的重型组件，必须使用 `next/dynamic` 进行动态导入。

**链接预加载**: 必须使用 Next.js 的 `<Link>` 组件进行页面间的导航，以利用其自动预加载功能。

### 7.3. 第三方脚本审计

所有第三方脚本（如 Zoho PageSense, Google Analytics）的集成，都必须通过 Next.js 的 `<Script>` 组件进行，并配置合理的加载策略（如 `strategy="afterInteractive"`）。

必须定期（每季度）审计第三方脚本对性能的影响。

### 7.4. 监控与迭代

每月使用 Google PageSpeed Insights 和 Vercel Analytics 对核心用户路径进行性能评估，并记录结果。

任何导致性能预算超标的代码合并，都将被视为高优先级Bug进行修复。

## 第八章：搜索引擎优化(SEO)核心战略

### 8.1. SEO哲学
我们的SEO策略核心是"技术与内容的飞轮"。通过无可挑剔的技术基础，最大化地放大我们高质量内容的价值，建立品牌权威性，获取精准的有机流量。

### 8.2. 技术SEO实施清单

**元数据 (Metadata)**: 每一个页面 (page.tsx) 都必须导出一个 Metadata 对象，包含一个独特的、经过关键词优化的 title 和 description。

**结构化数据 (Structured Data)**: 必须为博客文章、服务、FAQ等内容类型，生成符合 Schema.org 规范的 JSON-LD 结构化数据。

**站点地图 (Sitemap)**: 必须在 app 目录下创建 sitemap.ts 文件，为所有公开页面动态生成 sitemap.xml。

**语义化HTML**: 必须严格遵循 03-开发规范.md 中的 8.1 原则，使用 `<main>`, `<article>`, `<nav>` 等语义化标签。

**国际化 (i18n)**: 必须确保 next-intl 正确配置，为所有支持的语言版本生成 hreflang 标签，以避免内容重复问题。

### 8.3. 内容SEO工作流

**关键词驱动**: 每一篇新博客的创作，都必须基于一次关键词研究，并确定一个核心目标关键词。

**"飞轮"链接**: 每一篇博客文章，都必须至少包含一个指向相关"服务详情页"或"解决方案页"的内部链接。

**内容中心**: 必须持续丰富"服务详情页"，使其成为围绕某个核心服务主题的、链接了多篇支持性博客文章的"支柱页面 (Pillar Page)"。

### 8.4. 监控与报告

必须配置 Google Search Console，用于监控网站的索引状态、关键词排名和技术SEO问题。

每月对核心服务和博客的有机流量及关键词排名进行回顾。

## 安全考虑

### 1. 数据保护
- 表单数据验证
- XSS防护
- CSRF保护

### 2. 隐私合规
- GDPR合规
- Cookie政策
- 数据收集透明度

## 开发规范

### 1. 代码规范
- ESLint + Prettier
- TypeScript严格模式
- 组件JSDoc注释

### 2. Git工作流
- **功能分支开发**：每个功能在独立分支开发
- **代码审查**：所有代码必须通过Pull Request审查
- **语义化提交信息**：遵循 Conventional Commits 规范

**Conventional Commits 规范示例：**
```
feat: add user login functionality
fix: correct blog post sorting issue
docs: update architecture document with i18n strategy
style: format code with prettier
refactor: extract common validation logic
test: add unit tests for Button component
chore: update dependencies to latest versions
```

**提交类型说明：**
- `feat`: 新功能
- `fix`: 错误修复
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动

### 3. 测试策略
- 单元测试（Jest + React Testing Library）
- 集成测试
- E2E测试（Playwright）

## 部署和监控

### 1. 部署策略
- 本地开发环境
- 暂存环境（未来）
- 生产环境（未来）

### 2. 监控指标
- 页面加载速度
- 用户交互指标
- 错误监控
- SEO排名监控

## 未来扩展计划

### 1. 功能扩展
- 在线支付集成
- 客户管理系统
- 多语言内容管理
- 移动端APP

### 2. 技术升级
- 微服务架构
- 数据库集成
- 实时通信功能
- AI内容生成

---

**重要提醒**: 本文档详细记录了项目的技术架构和架构决策，但具体的页面规格、内容模块和组件构成请参考 **[14-页面规格与内容蓝图](./14-页面规格与内容蓝图.md)** - 项目的施工总蓝图和唯一事实来源。

**文档维护：**
本文档将随着项目发展持续更新，记录重要的架构决策和技术选择。
